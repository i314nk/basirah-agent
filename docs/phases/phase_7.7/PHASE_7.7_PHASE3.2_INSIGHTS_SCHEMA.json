{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AnalysisInsights",
  "description": "Structured qualitative insights from investment analysis",
  "type": "object",
  "properties": {
    "decision": {
      "type": "string",
      "enum": ["BUY", "WATCH", "AVOID"],
      "description": "Investment recommendation"
    },
    "conviction": {
      "type": "string",
      "enum": ["HIGH", "MODERATE", "LOW"],
      "description": "Confidence level in the decision"
    },
    "moat_rating": {
      "type": "string",
      "enum": ["DOMINANT", "STRONG", "MODERATE", "WEAK"],
      "description": "Economic moat strength assessment"
    },
    "risk_rating": {
      "type": "string",
      "enum": ["LOW", "MODERATE", "HIGH"],
      "description": "Overall risk level assessment"
    },
    "primary_risks": {
      "type": "array",
      "items": {"type": "string"},
      "minItems": 1,
      "maxItems": 8,
      "description": "Key risks identified (3-5 typically)"
    },
    "moat_sources": {
      "type": "array",
      "items": {"type": "string"},
      "minItems": 1,
      "maxItems": 6,
      "description": "Sources of competitive advantage"
    },
    "business_model": {
      "type": "string",
      "maxLength": 500,
      "description": "How the business makes money (1-2 paragraphs)"
    },
    "management_assessment": {
      "type": "string",
      "maxLength": 500,
      "description": "Management quality and integrity evaluation"
    },
    "decision_reasoning": {
      "type": "string",
      "maxLength": 800,
      "description": "Rationale for BUY/WATCH/AVOID decision"
    },
    "integrity_evidence": {
      "type": "string",
      "maxLength": 500,
      "description": "Evidence of management integrity and shareholder alignment"
    },
    "red_flags": {
      "type": "array",
      "items": {"type": "string"},
      "maxItems": 5,
      "description": "Management or governance concerns identified"
    },
    "discount_rate_reasoning": {
      "type": "string",
      "maxLength": 400,
      "description": "Rationale for DCF discount rate selection"
    }
  },
  "required": ["decision", "conviction", "moat_rating", "risk_rating"],
  "additionalProperties": false
}
